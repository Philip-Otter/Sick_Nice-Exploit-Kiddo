#!/bin/python3

# Copyright 2023 2xdropout

from os import system

print('Building SNEK deployment')

with open('Version.txt','r') as file:
    for line in file:
        version = line
file.close()

print('VERSION:  ', str(version))

system('rm -rf ~/Desktop/SNEKDeployment')
system('mkdir ~/Desktop/SNEKDeployment')
deploymentFolder = '~/Desktop/SNEKDeployment/SNEK_' + str(version).replace(' ', '_') + '_'
command = 'mkdir ' + deploymentFolder 
system(command)
command = 'mkdir ' + deploymentFolder +'/SNEK'
system(command)

# Copy installer folder
command = 'cp -R ../Installer ' + deploymentFolder + '/Installer -v'
system(command)

# Copy SNEK folders
command = 'cp -R ../SNEK_Art ' + deploymentFolder + '/SNEK/SNEK_Art -v'
system(command)
command = 'cp -R ../SNEK_Payloads ' + deploymentFolder + '/SNEK/SNEK_Payloads -v'
system(command)

# Copy version file
command = 'cp ./Version.txt ' + deploymentFolder + '/SNEK -v'
system(command)

# Copy remaining files
SNEK = ['SNEK.py', 'SNEKactions.py', 'SNEKart.py', 'SNEKlistener.py','SNEKpayloader.py', 
    'SNEKrecon.py', 'SNEKshell.py', 'SNEKhiss.py', 'NOTICE', 'README.md', 'LICENSE']

for file in SNEK:
    command = 'cp ../' + file + ' '  + deploymentFolder + '/SNEK -v'
    system(command)

print('\nDONE!\n')